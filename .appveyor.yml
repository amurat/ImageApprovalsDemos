environment:
  matrix:
    - APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    - APPVEYOR_BUILD_WORKER_IMAGE: Ubuntu
      CC: gcc-7
      CXX: g++-7

platform:
  - x64

configuration: Release

clone_depth: 1

install:
  - ps: >-
      if($isWindows) {
        $env:Path = "C:\Python37;C:\Python37\Scripts;" + $env:Path;
        python --version | Write-Host;
        python -m pip install --upgrade pip;
        python -m pip install conan;
      } elseif($isLinux) {
        sudo apt install -y python3-pip;
        sudo pip3 install conan;
      }
       
      conan user;

      conan remote add bincrafters https://api.bintray.com/conan/bincrafters/public-conan;

before_build:
  - pwsh: git submodule update --init

build_script:
  - ps: mkdir build | Out-Null
  - ps: cd build
  - ps: cmake .. -DCMAKE_BUILD_TYPE="$env:CONFIGURATION"
  - ps: cmake --build . --config "$env:CONFIGURATION"

test: off
